{
    "name": "Cruddur Configuration",
    "workspaceFolder": "/workspaces/${localWorkspaceFolderBasename}",
    "dockerFile": "Dockerfile",
    "extensions": ["42Crunch.vscode-openapi"],
    "forwardPorts": [3000, 4567, 2000],
    "postCreateCommand": "sudo service postgresql start",
    "runArgs": ["-v", "${env:HOME}/.aws:/root/.aws:cached"],
    "workspaceMount": "source=${localWorkspaceFolder},target=/workspace,type=bind,consistency=cached",
    "remoteUser": "vscode",
    "appPort": [3000, 4567, 2000],
    "customizations": {
        "vscode": {
            "extensions": [
                "ms-azuretools.vscode-docker",
                "ms-python.python",
                "vscodevim.vim"
            ],
            "settings": {
                "terminal.integrated.fontSize": 20,
                "editor.fontSize": 20,
                "workbench.colorTheme": "Default Dark+ Experimental"
            },
            "tasks": [
                {
                    "label": "Setup Python",
                    "type": "shell",
                    "command": [
                        "pyenv install 3.10.9",
                        "pyenv global 3.10.9",
                        "python -m venv venv",
                        "source venv/bin/activate",
                        "pip install flask",
                        "pip install --upgrade pip"
                    ]
                },
                {
                    "label": "Setup AWS CLI",
                    "type": "shell",
                    "command": [
                        "curl 'https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip' -o 'awscliv2.zip'",
                        "unzip awscliv2.zip",
                        "sudo ./aws/install"
                    ]
                },
                {
                    "label": "Setup PostgreSQL",
                    "type": "shell",
                    "command": [
                        "curl -fsSL https://www.postgresql.org/media/keys/ACCC4CF8.asc|sudo gpg --dearmor -o /etc/apt/trusted.gpg.d/postgresql.gpg",
                        "echo 'deb http://apt.postgresql.org/pub/repos/apt/ `lsb_release -cs`-pgdg main' |sudo tee  /etc/apt/sources.list.d/pgdg.list",
                        "sudo apt update",
                        "sudo apt install -y postgresql-client-13 libpq-dev"
                    ]
                }
            ]
        }
    },
    "features": {
        "ghcr.io/devcontainers/features/aws-cli:1": {}
    },
    "remoteEnv": {
        "AWS_CLI_AUTO_PROMPT": "on-partial"
    }
}
